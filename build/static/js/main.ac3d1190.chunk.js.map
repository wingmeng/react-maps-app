{"version":3,"sources":["icon/marker.png","iconBtn.js","list.js","mapConfig.js","notify.js","map.js","App.js","placesAPI.js","serviceWorker.js","index.js"],"names":["module","exports","iconsUrl","IconBtn","state","isIconLoaded","_this2","this","axios","get","timeout","then","$script","catch","setState","props","react_default","a","createElement","className","concat","type","title","style","Object","objectSpread","disabled","onClick","icon","aria-hidden","href","children","React","Component","List","items","aria-label","length","map","item","key","id","name","activeId","onItemClick","mapConfig","center","lat","lng","zoomLv","_url","tag","url","_this","replace","positions","tl","tc","tr","cc","bl","bc","br","Notify","live","delay","Number","setTimeout","_this$props","position","theme","pos","Map","mapElm","isLoaded","isFailed","geoLocation","loadMap","mapAPI","document","getElementById","mapUrls","_this3","urls","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","_ref2","value","err","return","Promise","resolve","reject","timer","res","status","data","GMap_i18n","country","toLowerCase","GMap_cn","clearTimeout","initMap","latitude","longitude","_this4","MapConstr","split","reduce","total","cur","window","zoom","scaleControl","clickableIcons","gestureHandling","bindMapEvent","_this5","onMapReady","onMapClick","event","addListener","onMapDragend","onMapZoomChanged","_this6","navigator","geolocation","getCurrentPosition","coords","setCenter","mapNotice","src_notify","marginTop","content","role","height","App","placeMap","isMiniMode","isSearching","markers","infoWindow","radiusCircle","notification","radiusRange","query","placeId","places","initMiniMode","addEventListener","toggleAside","body","clientWidth","wantTo","mapZoomLv","getZoom","forEach","evtName","handle","_map$getCenter","getCenter","onSearch","buildMarkers","removeListener","setGlobalNotify","setCurPlaceId","from","location","hash","buildInfoWindow","getCurMarker","radius","fetch","json","Error","PlacesAPI","error","businesses","e","preventDefault","_map$getCenter2","setMap","Circle","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","closeInfoWindow","_this7","lastMarker","bounds","LatLngBounds","removeMarkers","place","_place$coordinates","coordinates","marker","Marker","markerIcon","zIndex","animation","Animation","DROP","push","extend","setZIndex","boundsCenter","fitBounds","buildRadiusCircle","i","close","InfoWindow","display_address","join","display_phone","price","rating","image_url","open","panTo","getPosition","msg","_this8","src_iconBtn","onSubmit","onFormSubmit","placeholder","onChange","updateQuery","target","display","list","onListClick","src_map","initSearch","rel","src","Boolean","hostname","match","ReactDOM","render","src_App_0"],"mappings":"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","file":"static/js/main.ac3d1190.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import React from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport $script from 'scriptjs';\nimport './iconBtn.scss';\n\n// svg 图标，from: iconfont.cn\nconst iconsUrl = '//at.alicdn.com/t/font_1084739_y0tftj5rsk.js';\n\n// Icon names:\nconst iconNames = [\n  'icon-search',\n  'icon-hotel',\n  'icon-left',\n  'icon-close',\n  'icon-menu',\n  'icon-back',\n  'icon-cog'\n];\n\n/**\n * IconBtn 图标按钮组件\n * @interface {string} [className] - 附加的 class 类名\n * @interface {string} [type] - 按钮类型，如 submit、reset、button\n * @interface {string} [title] - 按钮的 title 提示\n * @interface {object} [style] - 按钮的 style 样式自定义\n * @interface {boolean} [disabled] - 按钮是否处于禁用状态\n * @interface {function} [onClick] - 按钮点击事件\n * @interface {string} [icon] - 按钮图标的名称，如不设置，则不显示图标。\n */\nclass IconBtn extends React.Component {\n  state = {\n    isIconLoaded: true\n  }\n\n  // 生命周期：即将渲染\n  componentWillMount() {\n    axios.get(iconsUrl, { timeout: 5000 })\n      .then(() => {\n        $script(iconsUrl)\n      })\n\n      // 图标加载失败\n      .catch(() => {\n        this.setState({isIconLoaded: false})\n      })\n  }\n\n  render() {\n    const props = this.props;\n\n    return (\n      <button className={`icon-button ${props.className || ''}`}\n        type={props.type || ''}\n        title={props.title || ''}\n        style={{...props.style}}\n        disabled={props.disabled}\n        onClick={() => props.onClick ? props.onClick() : false}\n      >\n        {props.icon && this.state.isIconLoaded && (\n          <svg className=\"icon\" aria-hidden=\"true\">\n            <use href={`#${props.icon}`}></use>\n          </svg>\n        )}\n\n        {props.children && (\n          <span>{props.children}</span>\n        )}\n\n        {/* 图标加载失败，且无文本，则显示 title 避免一片空白 */}\n        {!this.state.isIconLoaded && !props.children && (\n          <small>{props.title}</small>\n        )}\n      </button>\n    )\n  }\n}\n\nIconBtn.propTypes = {\n  className: PropTypes.string,\n  type: PropTypes.string,\n  title: PropTypes.string,\n  style: PropTypes.object,\n  disabled: PropTypes.bool,\n  onClick: PropTypes.func,\n  icon: PropTypes.oneOf(iconNames)\n}\n\nexport default IconBtn;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * List 列表组件\n * @interface {string} [className] - 附加的 class 类名\n * @interface {array} [items] - 列表数据\n * @interface {string | number} [activeId] - 当前高亮条目 id\n * @interface {function} [onItemClick] - 列表项点击事件回调\n */\nfunction List(props) {\n  const { items } = props;\n\n  return (\n    <ul aria-label=\"Hotels list\" className={props.className}>\n      {!items.length && (\n        <li className=\"text-muted\"><small>当前列表为空</small></li>\n      )}\n      {items.map(item => (\n        <li key={item.id}>\n          {/* 使用锚点链接 */}\n          <a href={`#${item.id}`} id={item.id} title={item.name}\n            className={props.activeId === item.id ? 'is-active' : ''}\n            onClick={() => props.onItemClick && props.onItemClick(item.id)}\n          >{item.name}</a>\n        </li>\n      ))}\n    </ul>\n  )\n}\n\nList.propTypes = {\n  className: PropTypes.string,\n  items: PropTypes.array,\n  activeId: PropTypes.oneOfType([\n    PropTypes.string, PropTypes.number\n  ]),\n  onItemClick: PropTypes.func\n}\n\nexport default List;\n","export default {\n  center: {lat: 39.9069676409, lng: 116.3976057338},  // 初始化中心点（北京天安门国旗台）\n  zoomLv: 16,  // 初始化缩放级别\n  key: 'AIzaSyCU5WMfYm4M3VDqaMtCCAdhF-6me9dVS7I',\n\t_url: [\n    {\n      tag: 'GMap_i18n',\n      url: 'https://maps.googleapis.com/maps/api/js?&key={{key}}'\n    },\n\t\t{\n      tag: 'GMap_cn',\n      url: 'http://maps.google.cn/maps/api/js?&key={{key}}'\n    }\n  ],\n  get url() {\n    return this._url.map((item) => {\n      item.url = item.url.replace('{{key}}', this.key);\n      return item;\n    })\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './notify.scss';\n\n// position class 类名映射\nconst positions = {\n  tl: 'pos-top-left',\n  tc: 'pos-top-center',\n  tr: 'pos-top-right',\n  cc: 'pos-center',\n  bl: 'pos-bottom-left',\n  bc: 'pos-bottom-center',\n  br: 'pos-bottom-right'\n};\n\n// 主题\nconst themes = ['lighten', 'darken'];\n\n// 类型\nconst types = ['loading', 'notice'];\n\n/**\n * Notify 通知提示组件\n * @interface {number} [delay] - 通知提示框停留时间，超时后消失。不设置或设置为0，则不消失\n * @interface {string} [position] - 通知提示框相对于父容器的位置（见上面的 positions）\n * @interface {string} [theme] - 主题背景色，如不设置则为透明背景\n * @interface {string} [type] - 提示框类型，notice（默认） 或 loading\n */\nclass Notify extends React.Component {\n  state = {\n    live: true\n  }\n\n  // 生命周期：渲染完毕后\n  componentDidMount() {\n    let delay = Number(this.props.delay);\n\n    if (delay) {\n      setTimeout(() => {\n        this.setState({live: false})\n      }, delay)\n    }\n  }\n\n  render() {\n    const {position, theme, type, children} = this.props;\n    let pos = positions[position] || positions.tl;\n\n    return (\n      <div className={`notify ${theme} is-${type || 'notice'} ${pos} ${!this.state.live && 'invisible'}`}>\n        {children}\n      </div>\n    )\n  }\n}\n\nNotify.propTypes = {\n  delay: PropTypes.number,\n  position: PropTypes.oneOf(Object.keys(positions)),\n  theme: PropTypes.oneOf(themes),\n  type: PropTypes.oneOf(types)\n}\n\nexport default Notify;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport $script from 'scriptjs';\nimport axios from 'axios';\nimport mapAPI from './mapConfig';\nimport Notify from './notify';\n\n// 地图命名空间\nconst NS_map = 'google.maps';\n\n/**\n * Map 地图组件\n * @interface {string} id - 地图容器 id\n * @interface {numbner} [height] - 地图容器的高度，默认为 100%\n * @interface {function} [onMapReady] - 地图初始化完成后的回调函数\n * @interface {function} [onMapClick] - 地图点击事件\n * @interface {function} [onMapDragend] - 地图拖放结束事件\n * @interface {function} [onMapZoomChanged] - 地图缩放事件\n * @interface {boolean} [geoLocation] - 是否开启 geolocation 地理定位\n * @interface {object} [mapNotice] - 地图状态通知信息配置\n */\nclass Map extends React.Component {\n  mapElm = null;\n\n  state = {\n    isLoaded: false,  // 地图是否加载成功\n    isFailed: false,  // 地图是否加载失败\n    map: null,  // 初始化后的地图实例\n    geoLocation: this.props.geoLocation\n  }\n\n  // 生命周期：首次渲染之前\n  componentWillMount() {\n    if (!this.state.isLoaded) {\n      this.loadMap(mapAPI.url)\n        .catch(() => {\n          this.setState({isFailed: true})\n        });\n    }\n  }\n\n  // 生命周期：首次渲染完成\n  componentDidMount() {\n    this.mapElm = document.getElementById(this.props.id);\n  }\n\n  // 加载地图\n  loadMap(mapUrls) {\n    const urls = {};\n\n    for (let {tag, url} of mapUrls) {\n      urls[tag] = url;\n    }\n\n    return new Promise((resolve, reject) => {\n      // 使用定时器来检测是否加载超时\n      let timer = setTimeout(reject, 15 * 1e3);\n\n      // 使用第三方 API，根据访客 IP 获取当前位置\n      // 官网：https://ipapi.co/\n      axios.get('https://ipapi.co/json', { timeout: 5000 })\n        .then(res => res.status === 200 ? res.data : Promise.reject())\n        .then(data => {\n          let url = urls.GMap_i18n;\n\n          // 来自中国\n          if (data.country.toLowerCase() === 'cn') {\n            url = urls.GMap_cn;\n          }\n\n          $script(url, () => {\n            clearTimeout(timer);\n\n            if (this.state.geoLocation) {\n              // 使用 IP 定位成功，取消 HTML5 geolocation API 定位\n              this.setState({geoLocation: null});\n              this.initMap({lat: data.latitude, lng: data.longitude});\n            } else {\n              this.initMap()\n            }\n\n            resolve()\n          })\n        })\n\n        // 第三方 IP 定位 API 异常的后备方案\n        .catch(() => {\n          // 先尝试加载谷歌地图国际版\n          axios.get(urls.GMap_i18n, {timeout: 5000})\n            .then(() => {\n              $script(urls.GMap_i18n, () => {\n                clearTimeout(timer);\n                this.initMap();\n                resolve();\n              })\n            })\n\n            // 加载超时，加载谷歌地图中国版\n            .catch(() => {\n              $script(urls.GMap_cn, () => {\n                clearTimeout(timer);\n                this.initMap();\n                resolve();\n              })\n            })\n        })\n    })\n  }\n\n  // 地图初始化，center 为 IP 定位中心点，如无则使用缺省中心点\n  initMap(center) {\n    // 依次检验地图全局变量是否挂载到 window 上\n    // 类似于：window.google && window.google.maps\n    const MapConstr = NS_map.split('.')\n      .reduce((total, cur) => total ? total[cur] : null, window);\n\n    if (MapConstr) {\n      this.setState(() => ({\n        isLoaded: true,\n        map: new MapConstr.Map(this.mapElm, {\n          center: center || mapAPI.center,\n          zoom: mapAPI.zoomLv,\n          scaleControl: true,  // 比例尺\n          clickableIcons: false,  // 禁用默认 POI 点击\n\n          /**\n           * greedy     : 当用户在屏幕上滑动（拖动）时，地图一律平移。\n                          换言之，单指滑动和双指滑动都会使地图平移。\n           * cooperative: 用户必须单指滑动来滚动页面，双指滑动来平移地图。\n                          如果用户单指滑动地图，地图上会出现一个叠加项，提示用户使用双指来移动地图。\n           * none       : 无法对地图执行平移或双指张合操作。\n           * auto       : 默认值。根据页面是否可以滚动采用 cooperative 或 greedy 行为。\n           */\n          gestureHandling: 'greedy'\n        })\n      }));\n\n      this.bindMapEvent(MapConstr);\n      this.state.geoLocation && this.geoLocation();  // HTML5 地理定位\n    } else {\n      this.setState({isFailed: true})\n    }\n  }\n\n  // 绑定地图事件（可拓展）\n  // API 详情：http://www.runoob.com/googleapi/ref-map.html\n  bindMapEvent(MapConstr) {\n    const props = this.props;\n\n    // 地图就绪回调\n    props.onMapReady && props.onMapReady(MapConstr, this.state.map);\n\n    // 地图点击回调（不包含地图覆盖物）\n    props.onMapClick && MapConstr.event.addListener(\n      this.state.map, 'click', (event) => {\n        props.onMapClick(event, this.state.map)\n      }\n    );\n\n    // 地图拖放回调\n    props.onMapDragend && MapConstr.event.addListener(\n      this.state.map, 'dragend', () => {\n        props.onMapDragend(this.state.map)\n      }\n    );\n\n    // 地图缩放事件\n    props.onMapZoomChanged && MapConstr.event.addListener(\n      this.state.map, 'zoom_changed', () => {\n        props.onMapZoomChanged(this.state.map)\n      }\n    );\n  }\n\n  // HTML5 地理定位\n  geoLocation() {\n    if (navigator.geolocation) {\n      let timer = setTimeout(() => {\n        this.setState({geoLocation: 'timeout'})\n      }, 15 * 1e3);\n\n      navigator.geolocation.getCurrentPosition(pos => {\n        const position = {\n          lat: pos.coords.latitude,\n          lng: pos.coords.longitude\n        };\n\n        clearTimeout(timer);\n        this.state.map.setCenter(position);\n      })\n    }\n  }\n\n  render() {\n    const mapNotice = this.props.mapNotice;\n\n    return (\n      <div className={this.props.className}>\n        {this.props.children}\n\n        {!this.state.isLoaded && !this.state.isFailed && (\n          <Notify type=\"loading\">地图载入中...</Notify>\n        )}\n\n        {this.state.isFailed && (\n          <p className=\"text-center text-danger\" style={{marginTop: 20}}>\n            地图加载失败！请刷新重试\n          </p>\n        )}\n\n        {this.state.geoLocation === 'timeout' && (\n          <Notify type=\"notice\" delay={4000} theme=\"darken\" position=\"br\">\n            地理定位超时\n          </Notify>\n        )}\n\n        {/* 其他需要显示到地图上的通知信息 */}\n        {mapNotice && (\n          <Notify type={mapNotice.type}\n            position={mapNotice.position}\n            delay={mapNotice.delay}\n            theme={mapNotice.theme}\n            >{mapNotice.content}</Notify>\n        )}\n\n        <div id={this.props.id} role=\"application\" style={\n          {height: this.props.height || '100%'}\n        }/>\n      </div>\n    )\n  }\n}\n\nMap.propTypes = {\n  id: PropTypes.string.isRequired,\n  height: PropTypes.number,\n  onMapReady: PropTypes.func,\n  onMapClick: PropTypes.func,\n  onMapDragend: PropTypes.func,\n  onMapZoomChanged: PropTypes.func,\n  geoLocation: PropTypes.bool,\n  mapNotice: PropTypes.shape({\n    type: PropTypes.oneOf(['loading', 'notice']),\n    content: PropTypes.string,\n    delay: PropTypes.number,\n    theme: PropTypes.oneOf(['darken', 'lighten']),\n    position: PropTypes.oneOf(['tc', 'tr', 'cc', 'bl', 'bc'])\n  })\n}\n\nexport default Map;\n","import React from 'react';\nimport IconBtn from './iconBtn';\nimport List from './list';\nimport Map from './map';\nimport Notify from './notify';\nimport * as PlacesAPI from './placesAPI';\n\nimport './App.scss';\nimport markerIcon from './icon/marker.png';\n\nconst COLOR_success = '#58cc67';  // from _variables.scss\nconst SCREEN_sm = 480;   // 小屏设备尺寸基准\n\nclass App extends React.Component {\n  MapConstr = null;  // 地图构造函数\n  placeMap  = null;  // 当前地图实例\n\n  state = {\n    isMiniMode:   false,    // 侧边栏切换标识\n    isSearching:  false,    // API  搜索状态标识\n    markers:      [],       // 当前区域所有标记点\n    infoWindow:   null,     // 当前   marker 的 infoWindow\n    radiusCircle: null,     // 圆形搜索半径\n    mapNotice:    null,     // 地图状态通知信息\n    notification: '',       // 全局通知信息\n    radiusRange:  5 * 1e3,  // 搜索范围（m）\n    query:        '',       // 查询关键词\n    placeId:      null,     // 当前地点 id\n    places:       []        // 当前所有地点数据\n  }\n\n  // 生命周期：首次渲染之前\n  componentWillMount() {\n    let timer = null;\n\n    this.initMiniMode();\n\n    // 监听窗口调整事件\n    window.addEventListener('resize', () => {\n      clearTimeout(timer);\n\n      timer = setTimeout(() => {\n        this.initMiniMode()\n      }, 20)\n    }, false)\n  }\n\n  // 初始化侧边栏显示\n  // 小屏默认隐藏侧边栏\n  initMiniMode() {\n    this.toggleAside(\n      document.body.clientWidth <= SCREEN_sm ? 'close' : 'open'\n    )\n  }\n\n  // 切换侧边栏\n  toggleAside(wantTo) {\n    this.setState(state => {\n      switch(wantTo) {\n        case 'open':\n          return { isMiniMode: false }\n        case 'close':\n          return { isMiniMode: true }\n\n        // toggle\n        default:\n          return { isMiniMode: !state.isMiniMode }\n      }\n    })\n  }\n\n  // 初始化搜索功能\n  initSearch(MapConstr, map) {\n    this.MapConstr = MapConstr;\n    this.placeMap = map;\n    this.mapZoomLv = map.getZoom();\n\n    [\n      'idle',  // “空闲”（当前瓦片图加载完毕）事件\n      'dragend'  // 拖动结束事件\n    ].forEach(evtName => {\n      let handle = MapConstr.event.addListener(map, evtName, () => {\n        const { lat, lng } = map.getCenter();\n\n        this.onSearch(lat(), lng())\n          .then(() => {\n            this.buildMarkers(map);\n\n            // 完成初始化搜索后移除 idle 事件\n            if (evtName === 'idle') {\n              MapConstr.event.removeListener(handle)\n            }\n          })\n          .catch(err => {\n            this.setGlobalNotify(err)\n          })\n      })\n    })\n  }\n\n  onListClick(id) {\n    // 小屏且侧边栏展开，点击地图后先隐藏侧栏\n    if (document.body.clientWidth <= SCREEN_sm\n      && !this.state.isMiniMode) {\n      this.toggleAside('close')\n    }\n\n    this.setCurPlaceId(id, 'list')\n  }\n\n  // 设置当前位置 id\n  setCurPlaceId(id, from) {\n    this.setState({placeId: id});\n\n    if (from === 'map') {\n      // 地图可以使用路由吗？\n      // 暂时使用 hash 代替，用以将对应列表项滚动到可视区，但无法像路由那样有历史记录\n      window.location.hash = this.state.placeId;\n    } else if (from === 'list') {\n      this.buildInfoWindow(this.getCurMarker(id));\n    }\n  }\n\n  // 搜索给定经纬度附近的地点\n  onSearch(lat, lng) {\n    // 开启搜索提示\n    this.setState(() => (\n      {\n        isSearching: true,\n        mapNotice: {\n          content: '搜索中...',\n          type: 'loading',\n          theme: 'lighten',\n          position: 'cc'\n        }\n      }\n    ));\n\n    return new Promise((resolve, reject) => {\n      // 疑问：搜索超时定时器触发后如何中断当前 fetch 请求？\n      // 网上的 new AbortController() 兼容性堪忧\n      let timer = setTimeout(() => {\n        this.setState(() => (\n          {\n            isSearching: false,\n            mapNotice: null\n          }\n        ));\n\n        reject('搜索超时，请重试');\n      }, 15 * 1e3);\n\n      PlacesAPI.searchNearby(lat, lng, this.state.query, this.state.radiusRange)\n        .then(data => {\n          clearTimeout(timer);\n\n          // 移除搜索提示\n          this.setState(() => (\n            {\n              isSearching: false,\n              mapNotice: null\n            }\n          ));\n\n          if (data.error) {\n            this.setState({places: []});\n            reject('服务端接口异常，搜索失败');\n          } else {\n            this.setState({places: data.businesses})\n          }\n\n          // 搜索结果为空\n          if (!this.state.places.length) {\n            this.setState(() => (\n              {\n                mapNotice: {\n                  content: '当前无搜索结果',\n                  type: 'notice',\n                  theme: 'darken',\n                  position: 'cc'\n                }\n              }\n            ));\n          }\n\n          resolve()\n        })\n    })\n  }\n\n  // 更新查询关键词\n  updateQuery(value) {\n    this.setState({query: value})\n  }\n\n  // 表单提交事件\n  onFormSubmit(e) {\n    e.preventDefault();\n\n    const map = this.placeMap;\n    const { lat, lng } = map.getCenter();\n\n    this.onSearch(lat(), lng())\n      .then(() => {\n        this.buildMarkers(map);\n      })\n      .catch(err => {\n        this.setGlobalNotify(err)\n      })\n  }\n\n  buildRadiusCircle(map, center) {\n    // 清除上一个区域\n    if (this.state.radiusCircle) {\n      this.state.radiusCircle.setMap(null);\n      this.setState({radiusCircle: null});\n    }\n\n    let { lat, lng } = center;\n    let radiusCircle = new this.MapConstr.Circle({\n      strokeColor: COLOR_success,\n      strokeOpacity: 0.5,\n      strokeWeight: 2,\n      fillColor: COLOR_success,\n      fillOpacity: 0.15,\n      radius: this.state.radiusRange,\n      center: {lat: lat(), lng: lng()},\n      map\n    });\n\n    this.MapConstr.event.addListener(radiusCircle, 'click', () => {\n      this.closeInfoWindow()\n    });\n\n    this.setState({radiusCircle});\n  }\n\n  // 创建并显示 marker\n  buildMarkers(map) {\n    let markers = [];\n    let lastMarker = null;\n    let bounds = new this.MapConstr.LatLngBounds();  // 界限集合\n\n    this.removeMarkers();\n    this.state.places.forEach(place => {\n      let { latitude, longitude } = place.coordinates;\n      let marker = new this.MapConstr.Marker({\n          position: {\n            lat: Number(latitude),  // 强类型转换，防止参数异常\n            lng: Number(longitude)\n          },\n          icon: markerIcon,  // 自定义图标\n          data: {  // 存储 place 数据\n            ...place\n          },\n          zIndex: 1,\n          animation: this.MapConstr.Animation.DROP,  // 下落动画\n          map\n      });\n\n      markers.push(marker);\n      bounds.extend(marker.position);  // 将 marker 加入到界限集合中\n\n      this.MapConstr.event.addListener(marker, 'click', () => {\n        if (lastMarker) {\n          lastMarker.setZIndex(1)\n        }\n\n        marker.setZIndex(100);  // 当前点击的 marker 置顶\n        lastMarker = marker;\n        this.setCurPlaceId(marker.data.id, 'map');\n        this.buildInfoWindow(marker);\n      })\n    });\n\n    if (markers.length) {\n      let boundsCenter = bounds.getCenter();\n\n      // 缩放平移地图，使所有 marker 都显示出来\n      map.setCenter(boundsCenter);\n      map.fitBounds(bounds);\n\n      this.buildRadiusCircle(map, boundsCenter);\n    }\n\n    this.setState({markers});\n  }\n\n  // 移除 markers\n  removeMarkers() {\n    this.state.markers.forEach(marker => {\n      marker.setMap(null);\n      marker = null;  // 释放内存\n    });\n\n    this.setState({markers: []});\n  }\n\n  // 获取当前 placeId 对应的地图 marker\n  getCurMarker(id) {\n    let markers = this.state.markers;\n\n    for (let i = 0; i < markers.length; i++) {\n      if (markers[i].data.id === id) {\n        return markers[i]\n      }\n    }\n  }\n\n  // 创建 infoWindow\n  buildInfoWindow(marker) {\n    let { data, map } = marker;\n\n    // 关闭上一个\n    if (this.state.infoWindow) {\n      this.state.infoWindow.close()\n    }\n\n    let infoWindow = new this.MapConstr.InfoWindow({\n      content: `<div class=\"map-info-window\">\n          <h4 class=\"info-title\">${data.name}</h4>\n          <div class=\"info-body\">\n            <div class=\"info-content\">\n              <p><strong>地址：</strong>${data.location.display_address.join(', ')}</p>\n              <p><strong>座机：</strong>${data.display_phone}</p>\n              <p><strong>价格：</strong>${data.price}</p>\n              <p><strong>评分：</strong>${data.rating}</p>\n            </div>\n            <figure class=\"info-photo\">\n              <img src=\"${data.image_url || markerIcon}\" alt=\"${data.name}\" />\n            </figure>\n          </div>\n        </div>`\n    });\n\n    infoWindow.open(map, marker);\n    map.panTo(marker.getPosition());  // 平移居中\n    this.setState({infoWindow});\n  }\n\n  // 关闭地图上的 infoWindow\n  closeInfoWindow() {\n    if (this.state.infoWindow) {\n      this.state.infoWindow.close();\n      this.setState({infoWindow: null});\n    }\n  }\n\n  // 全局通知信息\n  setGlobalNotify(msg) {\n    this.setState({notification: msg})\n  }\n\n  render() {\n    return (\n      <div className={this.state.isMiniMode ? 'is-aside-mini' : ''}>\n        <header id=\"header\">\n          <h1 className=\"app-title\">\n            <span>Hotel Locations</span>\n            <IconBtn className=\"btn-close\"\n              title=\"关闭侧边栏\"\n              icon=\"icon-left\"\n              onClick={() => this.toggleAside('close')}\n            />\n          </h1>\n          <IconBtn className=\"btn-menu text-info\"\n            title=\"切换侧边栏\"\n            icon=\"icon-menu\"\n            onClick={() => this.toggleAside()}\n          />\n        </header>\n        <main id=\"main\">\n          <aside className=\"aside\">\n            <form onSubmit={(event) => this.onFormSubmit(event)}>\n              <div className=\"form-group\">\n                <div className=\"input-group\">\n                  <input type=\"text\" className=\"form-control\"\n                    value={this.state.query}\n                    placeholder=\"名称/地址\"\n                    aria-label=\"keywords\"\n                    onChange={(event) => this.updateQuery(event.target.value)}\n                  />\n                  <IconBtn className=\"btn-danger\"\n                    title=\"清空\"\n                    icon=\"icon-close\"\n                    type=\"reset\"\n                    style={{display: this.state.query ? 'block' : 'none'}}\n                    onClick={() => this.updateQuery('')}\n                  />\n                  <IconBtn className=\"btn-primary\"\n                    disabled={this.state.isSearching}\n                    title=\"搜索\"\n                    icon=\"icon-search\"\n                    type=\"submit\"\n                  />\n                </div>\n              </div>\n            </form>\n            <List className=\"list\"\n              items={this.state.places}\n              activeId={this.state.placeId}\n              onItemClick={(id) => this.onListClick(id)}\n            />\n          </aside>\n          <Map className=\"map-container\" id=\"mapBox\"\n            geoLocation={true} // 开启 geo 定位\n            mapNotice={this.state.mapNotice}\n            onMapReady={(MapConstr, map) => this.initSearch(MapConstr, map)}\n            onMapClick={() => this.closeInfoWindow()}\n          >\n            <p className=\"sources-tip\">\n              搜索数据来自：<a href=\"https://www.yelp.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                <img src=\"https://s3-media2.fl.yelpcdn.com/assets/srv0/yelp-shared-styles/58cfc999e1f5/lib/img/logos/burst_desktop_xsmall_outline.png\" />\n                Yelp</a>\n            </p>\n          </Map>\n        </main>\n        {this.state.notification && (\n          <Notify delay={5000} type=\"notice\" theme=\"darken\" position=\"cc\">\n            {this.state.notification}\n          </Notify>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// Yelp API 不支持 localhost 访问，故使用代理服务器来响应客户端的 Yelp API 请求\n// `../server/index.js`\nconst api = 'http://localhost:3001/yelp';\n\n// https://www.yelp.com/developers/documentation/v3/all_category_list\nconst categories = 'hotels';\n\nexport const searchNearby = (lat, lng, query, radius) => {\n  if (!(lat && lng)) {\n    return new Error(`\\`lat\\` or \\`lng\\` is required`)\n  }\n\n  return fetch(`${api}/businesses_search\n    ?categories=${categories}\n    &latitude=${lat}\n    &longitude=${lng}\n    &term=${query}\n    &radius=${radius}\n    `.replace(/[\\n\\s]*/gm, ''))\n    .then(res => res.json())\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  // if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n  if ('serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    // const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    // if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      // return;\n    // }\n\n    window.addEventListener('load', () => {\n      // const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n      const swUrl = `service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.register();  // @临时\n"],"sourceRoot":""}