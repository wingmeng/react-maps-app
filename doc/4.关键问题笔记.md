# 关键问题笔记

- **中国大陆地区无法使用谷歌地图**
    > 相关文件：`map.js`

    - 描述：使用谷歌地图的 API 请求失败，必须翻墙使用。
    - 解决(2019-03-12)：中国大陆地区可使用 `http://maps.google.cn/maps/api/js` 这个 API 地址，虽然一些高级功能（如 Places 等）用不了，但在本项目中只用到地图展示的基础功能，不影响最终效果。
        > 中国大陆地区的这个 API 地址不支持跨域请求脚本

- **地图组件参数更新了，但没有触发 render**
    > 相关文件：`App.js`, `map.js`

    - 描述：`App.js` 传递自身的 `state.hotels` 给 `Map` 组件，当 `state.hotels` 由异步接口更新数据时，`Map` 组件并未接收到新参数，在其生命周期函数 `componentWillUpdate` 中无法访问到新数据，从而视图没有重新渲染。
    - 猜想(2019-03-13)：应该是 React 没有在视图中找到 marks 的引用，所以忽略了更新
    - 解决(2019-03-13)：使用回调函数传递参数，手动更新